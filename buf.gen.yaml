version: v1
plugins:
  # TypeScript + .d.ts
  - plugin: buf.build/protocolbuffers/js
    out: generated/typescript
    opt:
      - import_style=commonjs
      - binary
      - declare

  # gRPC for Node.js
  - plugin: buf.build/grpc/node
    out: generated/typescript
    opt: grpc_js

  # Python
  - plugin: buf.build/protocolbuffers/python
    out: generated/python
  - plugin: buf.build/grpc/python
    out: generated/python

  # ✅ NEW: C++ Protobuf
  - plugin: buf.build/protocolbuffers/cpp
    out: generated/cpp

  # ✅ NEW: C++ gRPC
  - plugin: buf.build/grpc/cpp
    out: generated/cpp
